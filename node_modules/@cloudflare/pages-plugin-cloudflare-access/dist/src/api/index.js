// src/api/index.ts
var getIdentity = async ({
  jwt,
  domain
}) => {
  const identityURL = new URL("/cdn-cgi/access/get-identity", domain);
  const response = await fetch(identityURL.toString(), {
    headers: { Cookie: `CF_Authorization=${jwt}` }
  });
  if (response.ok)
    return await response.json();
};
var generateLoginURL = ({
  redirectURL: redirectURLInit,
  domain,
  aud
}) => {
  const redirectURL = typeof redirectURLInit === "string" ? new URL(redirectURLInit) : redirectURLInit;
  const { hostname } = redirectURL;
  const loginPathname = `/cdn-cgi/access/login/${hostname}?`;
  const searchParams = new URLSearchParams({
    kid: aud,
    redirect_url: redirectURL.pathname + redirectURL.search
  });
  return new URL(loginPathname + searchParams.toString(), domain).toString();
};
var generateLogoutURL = ({ domain }) => new URL(`/cdn-cgi/access/logout`, domain).toString();
export {
  generateLoginURL,
  generateLogoutURL,
  getIdentity
};
//# sourceMappingURL=index.js.map
